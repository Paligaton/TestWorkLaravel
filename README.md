# Тестовое задание на позицию PHP программист (full-stack)
## Каталог интернет-магазина

### Возможности

- В проекте на главной странице есть боковой каталог категорий товаров, а также товары в категории или все товары если категория не выбрана
- На странице товара укзано название товара его цена и категории

### Используемые ресурсы:



- PHP 7.4
- Nginx 1.23
- MySQL (MariaDB-10.8).
- Bootstrap 4.0
- JQuery 3.6.1
- Laravel 8.83.26
- Git



## Установка

С помощью Git клонироутеся репозиторий

```sh
git clone https://github.com/Paligaton/TestWorkLaravel.git
cd TestWorkLaravel
```

После этого в директории проекта иницилизируется композер

```sh
composer i
```
Создается база данных
Настраивается подключение к базе данных в файле ".env" и запускается миграция

```
php artisan migrate
```
Чтобы заполнить созданные таблицы данными необходимо запустить сид
```
php artisan db:seed
```

И запустить локальный php сервер

```
php artisan serve
``` 
Теперь проект доступен по указанном в терминале адресу
## Структура проекта
### Модели:
2 Модели Groups - для получения данных из таблицы groups и  Products - для получения данных из таблиц products и prices

### Контроллер:

Контроллер MainController обрабатывающий 2 вида страницы - список товаров(функция index) и данные о товаре (функция product)

Функция index получает 3 явных get параметра(parent_id - выбранная категория товаров; pagination - количество записей на странице; sort - вид сортировки) и один неявный (page - номер страницы) как итоге функция возвращает обработчик вида check с данными о категориях товаров, список товаров,  id выбранной категории и вид сортировки, если функция же вызываеться ajax запросом функция возвращает обработчик вида load со списком товаров. 

Функция product получает только id товара и возвращает данные о нем и его хлебные крошки

Еще в контроллере присутствуют и используются 3 закрытые функции: getChildrenGroups для получения индентификаторов дочерних категорий товаров; getList рекурсивная функция для получения множества категорий с подмножествами вплоть до выбранной категории; getBreadCrumbs - рекурсивная функця для получения массива хлебных крошек

Маршрутизация адресов до функций контроллера прописана в файле web.php

### Обработчики вида:

Первый шаблон имеет 2 части боковая сторона - отображает данные о категориях; основная содержит список товаров в категории, интерфейс сортировки и пагинации, так же шаблон содержит скрипт осуществлющий ajax запросы.

Второй шаблон отображает только хлебные крошки и данные о товаре.

